<title>History</title>

<app-nav id="history"></app-nav>

<section>
    <div class="relative bg-[url('/assets/main.png')] min-h-[100vh] flex flex-col bg-fixed bg-no-repeat bg-center bg-cover before:absolute before:inset-0 before:bg-black/60 text-white px-6 md:px-10 py-10 md:py-0 gap-8 items-center ">

        <div class="mt-10 flex justify-center z-10 w-full">
            <input
                type="text"
                placeholder="Search entries..."
                [(ngModel)]="searchQuery"
                class="px-4 py-2 w-full sm:w-3/4 md:w-1/2 rounded-md border border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg"
            />
        </div>

        @if (isLoading) {
            <div class="text-white text-2xl font-semibold text-center mt-10">
                Loading...
            </div>
        }

        @if (history?.length) {
            <div class="w-[98%] flex flex-col mt-2 mb-10 bg-white/10 backdrop-blur-md rounded-xl p-4 shadow-lg border border-white/20 text-base max-h-[875px] overflow-y-auto relative items-center">

                <h2 class="text-xl font-semibold text-green-400 text-center mb-2">History</h2>
                <table class="w-[98%] text-left text-gray-200 text-base">
                    <thead class="border-b border-gray-400/40 z-20">
                        <tr>
                            <th class="pb-2 pl-1">Date</th>
                            <th class="pb-2">Claim</th>
                            <th class="pb-2">Status</th>
                            <th class="pb-2">Verdict</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (item of filteredHistory(); track item) {
                            <tr class="border-b border-gray-400/20 transition-all duration-300 ease-in-out hover:bg-white/20 hover:shadow-lg hover:scale-[1.02]">
                                <td class="pr-5 p-1">{{ item.date | date:'yyyy-MM-dd'}}</td>
                                <td class="cursor-pointer hover:underline">
                                    <a routerLink="/entry-details/{{item.verificationId}}" (click)="scrollToTop()">{{ item.claim }}</a>
                                </td>
                                <td class="pr-3">{{ item.status }}</td>
                                <td
                                    [class.text-green-400]="item.verdictType === 'TRUE'"
                                    [class.text-red-400]="item.verdictType === 'FALSE'"
                                    [class.text-yellow-400]="item.verdictType === 'UNDEFINED'"
                                    class="font-semibold"
                                >
                                    {{ item.verdictType }}
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>

            </div>
        }
    </div>
</section>

<app-footer></app-footer>
