<title>Settings</title>

<app-nav id="settings"></app-nav>


<section>
    <div class="flex flex-col justify-center items-center">

        <div class="flex flex-col text-left mb-15 mt-10 justify-baseline">
            <img src="assets/profilePlaceholder.png" alt="profilePlaceholder" class="w-40 h-40 rounded-full object-cover">
            <h1 class="text-3xl font-semibold">Welcome, {{ user.firstName }} {{ user.lastName }}</h1>
            <p class="text-sm text-gray-400">{{ user.email }}</p>
        </div>

        <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="w-[65%] mx-auto p-3 mb-44 bg-white rounded-2xl shadow-sm space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
                    <input type="text" formControlName="firstName" class="w-full rounded-xl border border-gray-300 p-3 focus:ring-2 focus:ring-green-500 focus:outline-none" />
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
                    <input type="text" formControlName="lastName" class="z-10 w-full rounded-xl border border-gray-300 p-3 focus:ring-2 focus:ring-green-500 focus:outline-none"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Gender</label>
                    <select formControlName="gender" class="w-full rounded-xl border border-gray-300 p-3 focus:ring-2 focus:ring-green-500 focus:outline-none">
                        @for (option of ['Male', 'Female', 'Other', 'Rather not say']; track option) {
                            <option [value]="option">{{ option }}</option>
                        }
                    </select>
                </div>
                <div>
                    <label  class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                    <input formControlName="country" class="w-full rounded-xl border border-gray-300 p-3 focus:ring-2 focus:ring-green-500 focus:outline-none">
                </div>
                <div class="md:col-span-1">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Language</label>
                    <input type="text" formControlName="language" class="w-full rounded-xl border border-gray-300 p-3 focus:ring-2 focus:ring-green-500 focus:outline-none"/>
                </div>
            </div>
            <div class="flex justify-start gap-5">
                <button type="button" (click)="startEdit()" class="cursor-pointer px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition">Edit</button>
                <button type="submit" (ngSubmit)="onSubmit()" class="cursor-pointer px-6 py-2 bg-blue-600 text-white rounded-xl" [ngClass]="isEnabled ? 'bg-blue-600 hover:bg-blue-800 transition' : 'bg-gray-400 cursor-not-allowed'">Save</button>
            </div>
            @if (submitted) {

                @if(successMessage) {
                    <p class="text-green-600 font-medium">{{ successMessage }}</p>
                }

                @if(errorMessage) {
                    <p class="text-red-600 font-medium">{{ errorMessage }}</p>
                }
            }
        </form>
    </div>
    <span class="text-center">
        @if (sent) {

                @if(successMessage) {
                    <p class="text-green-600 font-medium">{{ successMessage }}</p>
                }
            }
        
        <p class="text-sm text-gray-400">Want to change your password? 
            <a
            class="font-semibold text-cyan-500 cursor-pointer hover:text-cyan-700"
            (click)="requestReset($event)">
            Reset here
            </a>
        </p>
    </span>
</section>


<app-footer></app-footer>